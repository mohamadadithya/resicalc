/* Copyright 2021 by Mohamad Adithya */
const resistor=document.querySelector(".resistor"),numOfBandRadios=document.querySelectorAll(".num-of-band"),thirdSelect=document.querySelector(".input-select.third"),ppmSelect=document.querySelector(".input-select.ppm"),valueEls={price:document.querySelector(".value .price"),tolerance:document.querySelector(".value .tolerance"),ppm:document.querySelector(".value .ppm")};let resistorValue=[];const updateValue=()=>{let e=resistorValue.join(""),l=parseFloat(e);l>1e3&&(l=numFormatter(l,1)),valueEls.price.innerText=`${l} Î©`},band={first:resistor.querySelector(".first-band"),second:resistor.querySelector(".second-band"),third:resistor.querySelector(".third-band"),multiplier:resistor.querySelector(".multiplier"),tolerance:resistor.querySelector(".tolerance"),ppm:resistor.querySelector(".ppm")};numOfBandRadios.forEach(e=>{e.addEventListener("change",()=>{"4"===e.value?(thirdSelect.style.display="none",ppmSelect.style.display="none",band.third.style.display="none",band.ppm.style.display="none"):"5"===e.value?(thirdSelect.style.display="block",ppmSelect.style.display="none",band.third.style.display="block",band.ppm.style.display="none"):(thirdSelect.style.display="block",ppmSelect.style.display="block",band.third.style.display="block",band.ppm.style.display="block")})});const selectInputs=document.querySelectorAll(".color-select"),bandStrips=document.querySelectorAll(".band");selectInputs.forEach((e,l)=>{e.addEventListener("change",function(){let e=this.querySelector(":checked").getAttribute("data-color"),t=this.value;bandStrips[l].style.fill=e,4===l?valueEls.tolerance.innerText=`${t} %`:5===l?valueEls.ppm.innerText=`${t} ppm`:(resistorValue?resistorValue[l]=t:resistorValue.push(t),updateValue())})});const numFormatter=(e,l)=>{let t=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}].slice().reverse().find(l=>e>=l.value);return t?(e/t.value).toFixed(l).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+t.symbol:"0"};
